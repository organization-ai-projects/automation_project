# Autopilot Module

The `autopilot` module is designed to automate Git tasks while adhering to strict security policies. This document explains the different parts of the module and their roles.

## Module Structure

### 1. `autopilot_error.rs`

This file defines the `AutopilotError` structure, used to encapsulate autopilot-specific errors. It allows easy conversion of external errors (like `CommandError`) into internal errors.

### 2. `autopilot_mode.rs`

Contains the `AutopilotMode` enumeration, which defines the execution modes of the autopilot:

- `DryRun`: Does not modify anything, only generates a plan.
- `ApplySafe`: Applies changes only if security checks pass.

### 3. `autopilot_plan.rs`

Defines the `AutopilotPlan` structure, which represents an action plan generated by the autopilot. The fields include:

- `branch`: The target branch.
- `will_stage`: Files to be staged.
- `will_commit`: Indicates if a commit will be made.
- `commit_message`: The commit message.
- `will_push`: Indicates if a push will be performed.
- `notes`: Additional notes.

### 4. `autopilot_policy.rs`

Defines the `AutopilotPolicy` structure, which contains the security rules for the autopilot. For example:

- Protected branches.
- Relevant and blocked prefixes.
- Authorization for automatic push.

### 5. `autopilot_report.rs`

Contains the `AutopilotReport` structure, which combines the plan, classified changes, and execution logs. It allows tracking what was done or refused.

## Tests

Each file includes unit tests to validate its behavior. These tests cover the main use cases and default values.

## Usage

The module is designed to be used in scenarios where Git changes need to be automated while adhering to strict policies. The main steps are:

1. Generate a plan with `AutopilotPlan`.
2. Apply changes if the mode is `ApplySafe`.
3. Generate a report with `AutopilotReport`.

## Contribution

If you add new features, make sure to:

- Add explanatory comments.
- Write unit tests.
- Update this file if necessary.
